{"version":3,"file":"index.js","sources":["../../src/components/borderBox8/index.js"],"sourcesContent":["import React, { useState, useMemo, forwardRef } from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport classnames from 'classnames'\n\nimport { deepMerge } from '@jiaminghi/charts/lib/util/index'\nimport { deepClone } from '@jiaminghi/c-render/lib/plugin/util'\n\nimport useAutoResize from '../../use/autoResize'\n\nimport './style.less'\n\nconst defaultColor = ['#235fa7', '#4fd2dd']\n\nconst BorderBox = forwardRef(({ children, className, style, color = [], dur = 3 }, ref) => {\n  const { width, height, domRef } = useAutoResize(ref)\n\n  const [{ path, gradient, mask }] = useState(() => {\n    const timestamp = Date.now()\n\n    return {\n      path: `border-box-8-path-${timestamp}`,\n      gradient: `border-box-8-gradient-${timestamp}`,\n      mask: `border-box-8-mask-${timestamp}`\n    }\n  })\n\n  const mergedColor = useMemo(() => deepMerge(deepClone(defaultColor, true), color || []), [color])\n\n  const length = useMemo(() => (width + height - 5) * 2, [width, height])\n\n  const classNames = useMemo(() => classnames('dv-border-box-8', className), [\n    className\n  ])\n\n  return (\n    <div className={classNames} style={style} ref={domRef}>\n      <svg className='dv-svg-container' width={width} height={height}>\n        <defs>\n          <path\n            id={path}\n            d={`M2.5, 2.5 L${width - 2.5}, 2.5 L${width - 2.5}, ${height -\n              2.5} L2.5, ${height - 2.5} L2.5, 2.5`}\n            fill='transparent'\n          />\n          <radialGradient id={gradient} cx='50%' cy='50%' r='50%'>\n            <stop offset='0%' stopColor='#fff' stopOpacity='1' />\n            <stop offset='100%' stopColor='#fff' stopOpacity='0' />\n          </radialGradient>\n\n          <mask id={mask}>\n            <circle cx='0' cy='0' r='150' fill={`url(#${gradient})`}>\n              <animateMotion\n                dur={`${dur}s`}\n                path={`M2.5, 2.5 L${width - 2.5}, 2.5 L${width -\n                  2.5}, ${height - 2.5} L2.5, ${height - 2.5} L2.5, 2.5`}\n                rotate='auto'\n                repeatCount='indefinite'\n              />\n            </circle>\n          </mask>\n        </defs>\n\n        <use stroke={mergedColor[0]} strokeWidth='1' href={`#${path}`} />\n\n        <use\n          stroke={mergedColor[1]}\n          strokeWidth='3'\n          href={`#${path}`}\n          mask={`url(#${mask})`}\n        >\n          <animate\n            attributeName='stroke-dasharray'\n            from={`0, ${length}`}\n            to={`${length}, 0`}\n            dur={`${dur}s`}\n            repeatCount='indefinite'\n          />\n        </use>\n      </svg>\n\n      <div className='border-box-content'>{children}</div>\n    </div>\n  )\n})\n\nBorderBox.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  color: PropTypes.array,\n  dur: PropTypes.number\n}\n\nexport default BorderBox\n"],"names":["defaultColor","BorderBox","forwardRef","ref","children","className","style","color","dur","useAutoResize","width","height","domRef","useState","timestamp","Date","now","path","gradient","mask","mergedColor","useMemo","deepMerge","deepClone","length","classNames","classnames","propTypes","PropTypes","node","string","object","array","number"],"mappings":"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"}