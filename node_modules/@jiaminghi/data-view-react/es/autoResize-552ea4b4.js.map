{"version":3,"file":"autoResize-552ea4b4.js","sources":["../src/use/autoResize.js"],"sourcesContent":["import { useState, useCallback, useEffect, useRef, useImperativeHandle } from 'react'\nimport { debounce, observerDomResize } from '../util/index'\n\nexport default function useAutoResize(ref) {\n  const [state, setState] = useState({ width: 0, height: 0 })\n\n  const domRef = useRef(null)\n\n  const setWH = useCallback(() => {\n    const { clientWidth, clientHeight } = domRef.current\n\n    setState({ width: clientWidth, height: clientHeight })\n  }, [])\n\n  useImperativeHandle(ref, () => ({ setWH }), [])\n\n  useEffect(() => {\n    const debounceSetWHFun = debounce(setWH, 100)\n\n    debounceSetWHFun()\n\n    const domObserver = observerDomResize(domRef.current, debounceSetWHFun)\n\n    window.addEventListener('resize', debounceSetWHFun)\n\n    return () => {\n      domObserver.disconnect()\n      domObserver.takeRecords()\n\n      window.removeEventListener('resize', debounceSetWHFun)\n    }\n  }, [])\n\n  return { ...state, domRef, setWH }\n}\n"],"names":["useAutoResize","ref","useState","width","height","state","setState","domRef","useRef","setWH","useCallback","current","clientWidth","clientHeight","useImperativeHandle","useEffect","debounceSetWHFun","debounce","domObserver","observerDomResize","window","addEventListener","disconnect","takeRecords","removeEventListener"],"mappings":";;;;AAGe,SAASA,aAAT,CAAuBC,GAAvB,EAA4B;AAAA,kBACfC,SAAS,EAAEC,OAAO,CAAT,EAAYC,QAAQ,CAApB,EAAT,CADe;AAAA;AAAA,MAClCC,KADkC;AAAA,MAC3BC,QAD2B;;AAGzC,MAAMC,SAASC,OAAO,IAAP,CAAf;;AAEA,MAAMC,QAAQC,YAAY,YAAM;AAAA,0BACQH,OAAOI,OADf;AAAA,QACtBC,WADsB,mBACtBA,WADsB;AAAA,QACTC,YADS,mBACTA,YADS;;;AAG9BP,aAAS,EAAEH,OAAOS,WAAT,EAAsBR,QAAQS,YAA9B,EAAT;AACD,GAJa,EAIX,EAJW,CAAd;;AAMAC,sBAAoBb,GAApB,EAAyB;AAAA,WAAO,EAAEQ,YAAF,EAAP;AAAA,GAAzB,EAA4C,EAA5C;;AAEAM,YAAU,YAAM;AACd,QAAMC,mBAAmBC,SAASR,KAAT,EAAgB,GAAhB,CAAzB;;AAEAO;;AAEA,QAAME,cAAcC,kBAAkBZ,OAAOI,OAAzB,EAAkCK,gBAAlC,CAApB;;AAEAI,WAAOC,gBAAP,CAAwB,QAAxB,EAAkCL,gBAAlC;;AAEA,WAAO,YAAM;AACXE,kBAAYI,UAAZ;AACAJ,kBAAYK,WAAZ;;AAEAH,aAAOI,mBAAP,CAA2B,QAA3B,EAAqCR,gBAArC;AACD,KALD;AAMD,GAfD,EAeG,EAfH;;AAiBA,sBAAYX,KAAZ,IAAmBE,cAAnB,EAA2BE,YAA3B;AACD;;;;"}