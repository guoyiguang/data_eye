{"version":3,"file":"index.js","sources":["../../src/components/decoration2/index.js"],"sourcesContent":["import React, { useMemo, forwardRef } from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport classnames from 'classnames'\n\nimport { deepMerge } from '@jiaminghi/charts/lib/util/index'\nimport { deepClone } from '@jiaminghi/c-render/lib/plugin/util'\n\nimport useAutoResize from '../../use/autoResize'\n\nimport './style.less'\n\nconst defaultColor = ['#3faacb', '#fff']\n\nconst Decoration = forwardRef(({ reverse = false, className, style, color = [] }, ref) => {\n  const { width, height, domRef } = useAutoResize(ref)\n\n  function calcSVGData() {\n    return reverse\n      ? { w: 1, h: height, x: width / 2, y: 0 }\n      : { w: width, h: 1, x: 0, y: height / 2 }\n  }\n\n  const mergedColor = useMemo(() => deepMerge(deepClone(defaultColor, true), color || []), [color])\n\n  const { x, y, w, h } = useMemo(calcSVGData, [reverse, width, height])\n\n  const classNames = useMemo(() => classnames('dv-decoration-2', className), [\n    className\n  ])\n\n  return (\n    <div className={classNames} style={style} ref={domRef}>\n      <svg width={`${width}px`} height={`${height}px`}>\n        <rect x={x} y={y} width={w} height={h} fill={mergedColor[0]}>\n          <animate\n            attributeName={reverse ? 'height' : 'width'}\n            from='0'\n            to={reverse ? height : width}\n            dur='6s'\n            calcMode='spline'\n            keyTimes='0;1'\n            keySplines='.42,0,.58,1'\n            repeatCount='indefinite'\n          />\n        </rect>\n\n        <rect x={x} y={y} width='1' height='1' fill={mergedColor[1]}>\n          <animate\n            attributeName={reverse ? 'y' : 'x'}\n            from='0'\n            to={reverse ? height : width}\n            dur='6s'\n            calcMode='spline'\n            keyTimes='0;1'\n            keySplines='0.42,0,0.58,1'\n            repeatCount='indefinite'\n          />\n        </rect>\n      </svg>\n    </div>\n  )\n})\n\nDecoration.propTypes = {\n  reverse: PropTypes.bool,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  color: PropTypes.array\n}\n\n// 指定 props 的默认值：\nDecoration.defaultProps = {\n  reverse: false\n}\n\nexport default Decoration\n"],"names":["defaultColor","Decoration","forwardRef","ref","reverse","className","style","color","useAutoResize","width","height","domRef","calcSVGData","w","h","x","y","mergedColor","useMemo","deepMerge","deepClone","classNames","classnames","React","propTypes","PropTypes","bool","string","object","array","defaultProps"],"mappings":";;;;;;;;;;;;;;;;AAaA,IAAMA,eAAe,CAAC,SAAD,EAAY,MAAZ,CAArB;;AAEA,IAAMC,aAAaC,iBAAW,gBAAoDC,GAApD,EAA4D;AAAA,0BAAzDC,OAAyD;AAAA,MAAzDA,OAAyD,gCAA/C,KAA+C;AAAA,MAAxCC,SAAwC,QAAxCA,SAAwC;AAAA,MAA7BC,KAA6B,QAA7BA,KAA6B;AAAA,wBAAtBC,KAAsB;AAAA,MAAtBA,KAAsB,8BAAd,EAAc;;AAAA,uBACtDC,yBAAcL,GAAd,CADsD;AAAA,MAChFM,KADgF,kBAChFA,KADgF;AAAA,MACzEC,MADyE,kBACzEA,MADyE;AAAA,MACjEC,MADiE,kBACjEA,MADiE;;AAGxF,WAASC,WAAT,GAAuB;AACrB,WAAOR,UACH,EAAES,GAAG,CAAL,EAAQC,GAAGJ,MAAX,EAAmBK,GAAGN,QAAQ,CAA9B,EAAiCO,GAAG,CAApC,EADG,GAEH,EAAEH,GAAGJ,KAAL,EAAYK,GAAG,CAAf,EAAkBC,GAAG,CAArB,EAAwBC,GAAGN,SAAS,CAApC,EAFJ;AAGD;;AAED,MAAMO,cAAcC,cAAQ;AAAA,WAAMC,iBAAUC,iBAAUpB,YAAV,EAAwB,IAAxB,CAAV,EAAyCO,SAAS,EAAlD,CAAN;AAAA,GAAR,EAAqE,CAACA,KAAD,CAArE,CAApB;;AATwF,iBAWjEW,cAAQN,WAAR,EAAqB,CAACR,OAAD,EAAUK,KAAV,EAAiBC,MAAjB,CAArB,CAXiE;AAAA,MAWhFK,CAXgF,YAWhFA,CAXgF;AAAA,MAW7EC,CAX6E,YAW7EA,CAX6E;AAAA,MAW1EH,CAX0E,YAW1EA,CAX0E;AAAA,MAWvEC,CAXuE,YAWvEA,CAXuE;;AAaxF,MAAMO,aAAaH,cAAQ;AAAA,WAAMI,mBAAW,iBAAX,EAA8BjB,SAA9B,CAAN;AAAA,GAAR,EAAwD,CACzEA,SADyE,CAAxD,CAAnB;;AAIA,SACEkB;AAAA;AAAA,MAAK,WAAWF,UAAhB,EAA4B,OAAOf,KAAnC,EAA0C,KAAKK,MAA/C;AACE;AAAA;AAAA,QAAK,OAAUF,KAAV,OAAL,EAA0B,QAAWC,MAAX,OAA1B;AACE;AAAA;AAAA,UAAM,GAAGK,CAAT,EAAY,GAAGC,CAAf,EAAkB,OAAOH,CAAzB,EAA4B,QAAQC,CAApC,EAAuC,MAAMG,YAAY,CAAZ,CAA7C;AACE;AACE,yBAAeb,UAAU,QAAV,GAAqB,OADtC;AAEE,gBAAK,GAFP;AAGE,cAAIA,UAAUM,MAAV,GAAmBD,KAHzB;AAIE,eAAI,IAJN;AAKE,oBAAS,QALX;AAME,oBAAS,KANX;AAOE,sBAAW,aAPb;AAQE,uBAAY;AARd;AADF,OADF;AAcE;AAAA;AAAA,UAAM,GAAGM,CAAT,EAAY,GAAGC,CAAf,EAAkB,OAAM,GAAxB,EAA4B,QAAO,GAAnC,EAAuC,MAAMC,YAAY,CAAZ,CAA7C;AACE;AACE,yBAAeb,UAAU,GAAV,GAAgB,GADjC;AAEE,gBAAK,GAFP;AAGE,cAAIA,UAAUM,MAAV,GAAmBD,KAHzB;AAIE,eAAI,IAJN;AAKE,oBAAS,QALX;AAME,oBAAS,KANX;AAOE,sBAAW,eAPb;AAQE,uBAAY;AARd;AADF;AAdF;AADF,GADF;AA+BD,CAhDkB,CAAnB;;AAkDAR,WAAWuB,SAAX,GAAuB;AACrBpB,WAASqB,yBAAUC,IADE;AAErBrB,aAAWoB,yBAAUE,MAFA;AAGrBrB,SAAOmB,yBAAUG,MAHI;AAIrBrB,SAAOkB,yBAAUI;;AAGnB;AAPuB,CAAvB,CAQA5B,WAAW6B,YAAX,GAA0B;AACxB1B,WAAS;AADe,CAA1B;;;;"}